# VegaFusion-java
This directory contains the Java interface to VegaFusion. This is the pure-Java logic that relies on the native jni library generated by the `vegafusion-jni` Rust crate.

# Notes / Limitations
 - Vega JSON specifications are input and output as strings.
 - `VegaFusionRuntime.preTransformSpec` doesn't support inline datasets yet. 
 - `preTransformValues` isn't supported yet
 - `preTransformExtract` isn't supported yet
 - Custom SQL connections aren't supported yet (The default DataFusion connection is used)

# Running tests
In order to run tests, the `VEGAFUSION_JNI_LIBRARY` environment variable must be set to the compiled output of the `vegafusion-jni` crate. For example, on macOS:

```
cd vegafusion-jni
cargo build
cd ../java
VEGAFUSION_JNI_LIBRARY=`pwd`/../target/debug/libvegafusion_jni.dylib gradle test
```

Note that `VEGAFUSION_JNI_LIBRARY` must be set to an absolute path.

# Releasing
See [RELEASE.md](../RELEASE.md) for instructions on publishing to Maven Central.
