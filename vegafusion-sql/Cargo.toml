[package]
name = "vegafusion-sql"
version = "0.1.0"
edition = "2021"

[features]
default = ["std"]
std = []
# Enable JSON output in the `cli` example:
json_example = ["serde"]

[dependencies]
log = "0.4"
serde = { version = "1.0", features = ["derive"], optional = true }
sqlgen = {git = "https://github.com/vegafusion/sqlgen-rs.git", rev = "d17338efc0a84fa5d32cdbb5a9c8614d66ec3849" }
# Make sqlx optional
sqlx = { version = "0.5", features = [ "runtime-tokio-rustls", "sqlite", "macros"] }
async-trait = "0.1.56"
regex = "1.6.0"

[dependencies.vegafusion-core]
path = "../vegafusion-core"
features = ["sqlgen"]

[dependencies.datafusion-expr]
git = "https://github.com/apache/arrow-datafusion.git"
rev = "b2be7abd6fb4154f725cc4235318515f1183619a"

[dependencies.datafusion-common]
git = "https://github.com/apache/arrow-datafusion.git"
rev = "b2be7abd6fb4154f725cc4235318515f1183619a"

[dependencies.datafusion]
git = "https://github.com/apache/arrow-datafusion.git"
rev = "b2be7abd6fb4154f725cc4235318515f1183619a"

[dev-dependencies]
serde_json = { version = "1.0" }
simple_logger = "2.1"
matches = "0.1"
pretty_assertions = "1"
tokio = "1.18.2"

[dev-dependencies.datafusion]
git = "https://github.com/apache/arrow-datafusion.git"
rev = "b2be7abd6fb4154f725cc4235318515f1183619a"

[dependencies.vegafusion-rt-datafusion]
path = "../vegafusion-rt-datafusion"
